
0215

▼課題
    1. 複数DBを扱ったときに、トランザクションが効かない
      →DB構成を見直し、1つのDBで実施

      対応①
        ・各モデルで、接続しているDBのconnection指定を削除

      対応②
        ・default接続はそのまま

      対応③ 
        ・DB上でのテーブルを再作成する

    2.ソーシャルログインしたユーザのチーム情報がない
      ・新規登録であれば、チーム登録画面へ遷移(チームの新規登録、チームに入る登録の2系統)
      ・ソーシャルログインからのログイン後のリダイレクト先を変更する(チーム登録用のコントローラへ)
    
    3. LINE ログインは必ずメールアドレスがある状態で登録されてない
      ・メールアドレスがない場合の登録処理(条件)を追加
      →初期ログインで、メールアドレスが登録されていないとerrorを起こす
      →テーブル構成を見直す。
        対応①
            テーブル：usersのカラムemailを必須にしているが、任意に変更

        対応②
          チームを登録する処理の追加
            class: TeamRegisterController
              ・ソーシャルログインで登録したユーザに対して、ログインした時にユーザ情報からチームを取得

            条件(新規ユーザ登録のみ)
              -1. ソーシャルログインでログインしたユーザに対して、以下を確認する
                --1. 既に所属しているチームがあり、知人から紹介を受けた場合
                    →招待コードを入力し、登録するとチームと紐付けできる
                --2. 新規でチームを登録する場合
                    →入力フォームを開く

            新規ユーザの条件
              ・メールアドレスが存在していない
              ・LINEログインした、Googleログインした時に、各idでチェックした存在しないユーザ